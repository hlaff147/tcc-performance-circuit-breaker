
        <!DOCTYPE html>
        <html lang="pt-BR">
        <head>
            <meta charset="UTF-8">
            <title>An√°lise: degradacao</title>
            <style>
                body { 
                    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
                    margin: 40px; 
                    background-color: #f5f5f5; 
                    color: #333; 
                }
                .container { 
                    max-width: 1400px; 
                    margin: 0 auto; 
                    background-color: #fff; 
                    padding: 40px; 
                    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                    border-radius: 8px;
                }
                h1 { 
                    color: #2c3e50; 
                    border-bottom: 3px solid #3498db; 
                    padding-bottom: 15px; 
                }
                h2 { 
                    color: #34495e; 
                    margin-top: 40px;
                    border-bottom: 2px solid #ecf0f1;
                    padding-bottom: 10px;
                }
                table { 
                    border-collapse: collapse; 
                    width: 100%; 
                    margin: 25px 0;
                    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
                }
                th, td { 
                    border: 1px solid #ddd; 
                    padding: 12px; 
                    text-align: left; 
                }
                th { 
                    background-color: #3498db; 
                    color: white; 
                    font-weight: 600;
                }
                tr:nth-child(even) { background-color: #f9f9f9; }
                tr:hover { background-color: #f5f5f5; }
                img { 
                    max-width: 100%; 
                    height: auto; 
                    margin: 20px 0;
                    border-radius: 5px;
                    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
                }
                .metric-card {
                    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                    color: white;
                    padding: 20px;
                    border-radius: 8px;
                    margin: 20px 0;
                    box-shadow: 0 4px 6px rgba(0,0,0,0.1);
                }
                .metric-card h3 {
                    margin: 0 0 10px 0;
                    color: white;
                }
                .improvement {
                    color: #27ae60;
                    font-weight: bold;
                }
                .degradation {
                    color: #e74c3c;
                    font-weight: bold;
                }
                .info-box {
                    background-color: #e8f4f8;
                    border-left: 4px solid #3498db;
                    padding: 15px;
                    margin: 20px 0;
                    border-radius: 4px;
                }
                .warning-box {
                    background-color: #fff3cd;
                    border-left: 4px solid #ffc107;
                    padding: 15px;
                    margin: 20px 0;
                    border-radius: 4px;
                }
                .success-box {
                    background-color: #d4edda;
                    border-left: 4px solid #28a745;
                    padding: 15px;
                    margin: 20px 0;
                    border-radius: 4px;
                }
            </style>
        </head>
        <body>
            <div class="container">
                <h1>üéØ An√°lise Detalhada: DEGRADACAO</h1>
                
                
                <div class="warning-box">
                    <h4>üìå Contexto do Cen√°rio: Degrada√ß√£o Gradual</h4>
                    <p><strong>Situa√ß√£o:</strong> API externa degrada progressivamente (5% ‚Üí 20% ‚Üí 50% de falhas).</p>
                    <p><strong>Objetivo do CB:</strong> Detectar degrada√ß√£o precocemente e proteger contra sobrecarga.</p>
                    <p><strong>Interpreta√ß√£o correta:</strong> CB bloqueou 0.0% das requests para <strong>evitar falhas</strong>. V2 reduziu falhas reais em 82.6%.</p>
                </div>
                
                
                
                <div class="metric-card">
                    <h3>üíé BENEF√çCIOS DO CIRCUIT BREAKER</h3>
                    <ul>
                        <li><strong>Redu√ß√£o de Falhas (500):</strong> 
                            <span class="improvement">
                                82.60%
                            </span>
                        </li>
                        <li><strong>Melhoria no tempo m√©dio:</strong> 
                            <span class="improvement">
                                74.19%
                            </span>
                        </li>
                        <li><strong>Melhoria no P95:</strong> 
                            <span class="improvement">
                                17.80%
                            </span>
                        </li>
                        <li><strong>Melhoria no P99:</strong> 
                            <span class="improvement">
                                2.93%
                            </span>
                        </li>
                        <li><strong>Requisi√ß√µes protegidas:</strong> 0</li>
                        <li><strong>Tempo total economizado:</strong> 0.00s</li>
                    </ul>
                </div>
                
                
                <h2>üïí Disponibilidade x Downtime</h2>
                <table>
                    <thead>
                        <tr>
                            <th>Vers√£o</th>
                            <th>Disponibilidade Efetiva (200 + 202)</th>
                            <th>Fallback (%)</th>
                            <th>Downtime Total (min)</th>
                            <th>Downtime de Falha Real (min)</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>V1</td>
                            <td>75.3%</td>
                            <td>0.0%</td>
                            <td>3.21</td>
                            <td>3.21</td>
                        </tr>
                        <tr>
                            <td>V2</td>
                            <td>95.7%</td>
                            <td>69.1%</td>
                            <td>0.56</td>
                            <td>0.56</td>
                        </tr>
                    </tbody>
                </table>
                
                
                <h2>üìä Tempos de Resposta</h2>
                <table border="1" class="dataframe table">
  <thead>
    <tr style="text-align: right;">
      <th>Version</th>
      <th>Avg Response (ms)</th>
      <th>P50 (ms)</th>
      <th>P95 (ms)</th>
      <th>P99 (ms)</th>
      <th>Max (ms)</th>
      <th>Fast Requests (%)</th>
      <th>Slow Requests (%)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>V1</td>
      <td>747.851201</td>
      <td>35.648271</td>
      <td>2844.273741</td>
      <td>2977.870456</td>
      <td>3378.020376</td>
      <td>70.987326</td>
      <td>29.012674</td>
    </tr>
    <tr>
      <td>V2</td>
      <td>192.992325</td>
      <td>2.212729</td>
      <td>2338.044338</td>
      <td>2890.590676</td>
      <td>3133.520168</td>
      <td>92.745046</td>
      <td>7.246186</td>
    </tr>
    <tr>
      <td>V3</td>
      <td>1084.803225</td>
      <td>1028.203126</td>
      <td>2825.352968</td>
      <td>2975.360022</td>
      <td>3291.291987</td>
      <td>48.409599</td>
      <td>30.562015</td>
    </tr>
    <tr>
      <td>V4</td>
      <td>168.140911</td>
      <td>1.946250</td>
      <td>2222.407967</td>
      <td>2857.090749</td>
      <td>3218.310793</td>
      <td>93.666681</td>
      <td>6.302316</td>
    </tr>
  </tbody>
</table>
                
                <h2>üîç Distribui√ß√£o de Status</h2>
                <table border="1" class="dataframe table">
  <thead>
    <tr style="text-align: right;">
      <th>Version</th>
      <th>Total Requests</th>
      <th>Success (200)</th>
      <th>Fallback (202)</th>
      <th>API Failure (500)</th>
      <th>CB Open (503)</th>
      <th>Success Rate (%)</th>
      <th>Fallback Rate (%)</th>
      <th>Total Success Rate (%)</th>
      <th>API Failure Rate (%)</th>
      <th>CB Protection Rate (%)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>V1</td>
      <td>22769.0</td>
      <td>17156.0</td>
      <td>0.0</td>
      <td>5613.0</td>
      <td>0.0</td>
      <td>75.348061</td>
      <td>0.000000</td>
      <td>75.348061</td>
      <td>24.651939</td>
      <td>0.0</td>
    </tr>
    <tr>
      <td>V2</td>
      <td>22728.0</td>
      <td>6044.0</td>
      <td>15709.0</td>
      <td>975.0</td>
      <td>0.0</td>
      <td>26.592749</td>
      <td>69.117388</td>
      <td>95.710137</td>
      <td>4.289863</td>
      <td>0.0</td>
    </tr>
    <tr>
      <td>V3</td>
      <td>22802.0</td>
      <td>17502.0</td>
      <td>0.0</td>
      <td>5300.0</td>
      <td>0.0</td>
      <td>76.756425</td>
      <td>0.000000</td>
      <td>76.756425</td>
      <td>23.243575</td>
      <td>0.0</td>
    </tr>
    <tr>
      <td>V4</td>
      <td>22641.0</td>
      <td>5108.0</td>
      <td>16783.0</td>
      <td>750.0</td>
      <td>0.0</td>
      <td>22.560841</td>
      <td>74.126585</td>
      <td>96.687425</td>
      <td>3.312575</td>
      <td>0.0</td>
    </tr>
  </tbody>
</table>
                
                <div class="info-box">
                    <h4>üìä Interpreta√ß√£o dos Status Codes</h4>
                    <ul>
                        <li><strong>200/201:</strong> Sucesso direto da API externa</li>
                        <li><strong>202 (Fallback):</strong> Circuit Breaker retornou resposta alternativa (considerado sucesso)</li>
                        <li><strong>500:</strong> Falha real da API externa (erro propagado)</li>
                        <li><strong>503:</strong> Circuit Breaker ABERTO - prote√ß√£o ativa (evita timeouts de 3s)</li>
                    </ul>
                    <p><strong>Taxa de Sucesso Total = Success (200) + Fallback (202)</strong></p>
                </div>
                
                
                <div class="success-box">
                    <h4>‚úÖ Por que a "baixa taxa de sucesso" do V2 √© na verdade um SUCESSO?</h4>
                    <p><strong>V1 sem CB:</strong> Taxa de sucesso 75.3%, mas com 24.7% de falhas reais (500) e tempo m√©dio de 748ms (esperando timeouts).</p>
                    <p><strong>V2 com CB:</strong> Taxa de sucesso 26.6%, mas com apenas 4.3% de falhas reais (500) e tempo m√©dio de 193ms.</p>
                    <p><strong>Conclus√£o:</strong> CB bloqueou 0.0% das requests (503) para <strong>proteger contra sobrecarga</strong> e <strong>evitar timeouts de 3 segundos</strong>. O resultado √© <strong>82.6% menos falhas reais</strong> e <strong>74.2% de melhoria no tempo de resposta</strong>!</p>
                </div>
                
                
                <h2>üìà Gr√°ficos Comparativos</h2>
                <img src="plots/degradacao/response_comparison.png" alt="Compara√ß√£o de Lat√™ncia">
                <img src="plots/degradacao/status_distribution.png" alt="Distribui√ß√£o de Status">
                <img src="plots/degradacao/status_codes_detailed.png" alt="Status Codes Detalhados">
            </div>
        </body>
        </html>
        